---
import Phone from "../Phone.astro";
import { fetchApi } from "../../lib/api";
import Socials from "../Socials.astro";

let data;
try {
  data = (await fetchApi("contact-info", {})).data;
} catch {
  data = {};
}

const { address = "", schedule = "" } = data;

const { title } = Astro.props;
---

<footer class="frame">
  <address>
    <div>
      <span style="float: right;">{schedule}</span>
      <span style="white-space: pre;">{address}</span>
    </div>
    <div>
      <Phone />
      <span style="float: right;"><Socials height="48" /></span>
    </div>
  </address>

  <hr />

  <span>&copy; {title}, {new Date().getFullYear()}</span>
  <a href="/policy.txt" style="float: right;">Политика конфиденциальности</a>
</footer>

<style lang="scss">
  footer {
    box-sizing: border-box;
    margin-top: 128px;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
  }

  address {
    font-style: normal;

    div {
      margin-bottom: 24px;
    }
  }

  hr {
    margin: 64px -32px;
  }
</style>
